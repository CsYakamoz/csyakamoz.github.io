<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Javascript 函数传参类型 - Awesome</title>
    <meta property="og:title" content="Javascript 函数传参类型 - Awesome">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="曾经我一度将 javascript 函数传参类型分为两种：
[&amp;hellip;] 后来我发现，其实都是值传递;
先说明为啥曾经认为引用类型，是引用传递：
[&amp;hellip;] 1function demo(obj) { 2 obj.foo = &amp;#34;foo&amp;#34;; 3} 4 5let variable = {}; 6 7console.log(variable); // {} 8 &amp;hellip;">
      <meta property="og:description" content="曾经我一度将 javascript 函数传参类型分为两种：
[&amp;hellip;] 后来我发现，其实都是值传递;
先说明为啥曾经认为引用类型，是引用传递：
[&amp;hellip;] 1function demo(obj) { 2 obj.foo = &amp;#34;foo&amp;#34;; 3} 4 5let variable = {}; 6 7console.log(variable); // {} 8 &amp;hellip;">
      
    

    
    

    

    
    




    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  
  <body class="post">
    <header class="masthead">
      <h1><a href="/">Awesome</a></h1>

<p class="tagline">Suit up!</p>

      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/">Home</a></li>
  
  <li><a href="/tags/">Tags</a></li>
  
  <li><a href="/about/">About</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Javascript 函数传参类型</h1>

<h3>
  2020-09-09</h3>
<hr>


      </header>





<p>曾经我一度将 javascript 函数传参类型分为两种：</p>
<ol>
<li>基本类型：值传递</li>
<li>引用类型：引用传递</li>
</ol>
<p>后来我发现，其实都是<strong>值传递</strong>;</p>
<p>先说明为啥曾经认为引用类型，是引用传递：</p>
<div class="highlight"><pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#859900">function</span> <span style="color:#268bd2">demo</span>(<span style="color:#268bd2">obj</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#268bd2">obj</span>.<span style="color:#268bd2">foo</span> = <span style="color:#2aa198">&#34;foo&#34;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#859900">let</span> <span style="color:#268bd2">variable</span> = {};
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#268bd2">console</span>.<span style="color:#268bd2">log</span>(<span style="color:#268bd2">variable</span>); <span style="color:#93a1a1;font-style:italic">// {}
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#93a1a1;font-style:italic"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#268bd2">demo</span>(<span style="color:#268bd2">variable</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#268bd2">console</span>.<span style="color:#268bd2">log</span>(<span style="color:#268bd2">variable</span>); <span style="color:#93a1a1;font-style:italic">// { foo: &#39;foo&#39; }
</span></span></span></code></pre></div><p>外部向函数 <code>demo</code> 传递实参 (<code>variable</code>);</p>
<p>函数进行操作：向形参 (<code>obj</code>) 添加一个属性 (<code>foo</code>), 其值为 <code>foo</code>;</p>
<p>um&hellip;, 函数内部的操作，会影响外部的变量，这是很像引用传递，但我们再看个例子：</p>
<div class="highlight"><pre tabindex="0" style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#859900">function</span> <span style="color:#268bd2">demo</span>(<span style="color:#268bd2">obj</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>  <span style="color:#268bd2">obj</span> = { <span style="color:#268bd2">foo</span>: <span style="color:#2aa198">&#34;foo&#34;</span> };
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>  <span style="color:#268bd2">obj</span>.<span style="color:#268bd2">bar</span> = <span style="color:#2aa198">&#34;bar&#34;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#859900">let</span> <span style="color:#268bd2">variable</span> = {};
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#268bd2">console</span>.<span style="color:#268bd2">log</span>(<span style="color:#268bd2">variable</span>); <span style="color:#93a1a1;font-style:italic">// {}
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#93a1a1;font-style:italic"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#268bd2">demo</span>(<span style="color:#268bd2">variable</span>);
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#268bd2">console</span>.<span style="color:#268bd2">log</span>(<span style="color:#268bd2">variable</span>); <span style="color:#93a1a1;font-style:italic">// {}
</span></span></span></code></pre></div><p>为什么第二个输出依旧是 <code>{}</code> ???</p>
<hr>
<p>后面查了资料，得到与 C/C++ 相同（或许只是类似？) 的概念</p>
<ol>
<li>基本类型，其值存储在栈 (stack) 中</li>
<li>引用类型，其值存储在堆 (heap) 中</li>
<li>堆中的数据需要由指针指向后，才能访问</li>
</ol>
<p>对于第一个 <code>demo</code>:</p>
<ol>
<li><code>demo(variable)</code>, 这里向 demo 传递的其实是指向 <code>variable</code> 的指针；</li>
<li><code>obj.foo = &quot;foo&quot;;</code>, 因为 obj 指向外部的 <code>variable</code>, 故该表达式会影响外部的 <code>variable</code>;</li>
</ol>
<p>对于第二个 <code>demo</code>:</p>
<ol>
<li>
<p><code>demo(variable)</code>, 同上，向 demo 传递的是指向 <code>variable</code> 的指针；</p>
</li>
<li>
<p><code>obj = { foo: &quot;foo&quot; };</code>, 本来 obj 指向外部的 <code>variable</code>;</p>
<p>但该表达式，会创建新的对象 (<code>obj = { foo: &quot;foo&quot; };</code>), 并将该对象的内存地址赋值给 obj;</p>
<p>故执行完该表达式后，obj 不再指向外部的 <code>variable</code></p>
</li>
<li>
<p><code>obj.bar = &quot;bar&quot;;</code>, 因为 obj 不指向外部的 <code>variable</code>, 故该表达式也不会影响外部的 <code>variable</code>;</p>
</li>
</ol>
<p>总结：</p>
<p>在 javascript 中，函数传参类型只有一种 - <strong>值传递</strong>, 但分两种情况：</p>
<ol>
<li>基本类型：直接传递原始值</li>
<li>引用类型：传递该对象在堆中的内存地址，即指针</li>
</ol>



  <footer>
  
  



<script src="//cdn.bootcss.com/highlight.js//highlight.min.js"></script>



<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



  
  <hr>
  <div class="copyright">© <a href="https://github.com/csyakamoz">CsYakamoz</a> 2020</div>
  
  </footer>
  </article>
  
  </body>
</html>

