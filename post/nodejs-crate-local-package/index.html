<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.80.0" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="CsYakamoz" />
  <meta property="og:url" content="https://csyakamoz.github.io/post/nodejs-crate-local-package/" />
  <link rel="canonical" href="https://csyakamoz.github.io/post/nodejs-crate-local-package/" /><link rel="preload" href="/js/highlight.pack.js" as="script" /><link rel="alternate" type="application/atom+xml" href="https://csyakamoz.github.ioindex.xml" title="CsYakamoz`s Blog">

  <script type="application/ld+json">
  {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/csyakamoz.github.io"
      },
      "articleSection" : "post",
      "name" : "Node.js åˆ›å»ºæœ¬åœ°æ¨¡å—",
      "headline" : "Node.js åˆ›å»ºæœ¬åœ°æ¨¡å—",
      "description" : "é—®é¢˜æ¥æº åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¸ªäººä¹ æƒ¯ä¼šæŠŠé€šç”¨å®ç”¨æ¨¡å—æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹\nå› ä¸ºæ˜¯é€šç”¨å®ç”¨æ¨¡å—ï¼Œè‹¥é¡¹ç›®å±‚çº§è¾ƒå¤šï¼Œé‚£ä¹ˆå±‚çº§è¾ƒæ·±çš„æ–‡ä»¶å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œä¼šå‡ºç°è¿™æ ·çš„ä»£ç ï¼š\nconst Utils = require(\u0026#34;..\/..\/..\/..\/..\/..\/..\/utils\u0026#34;); è¿™ä¹ˆå¤šçš„ .., å¦‚æœå†™å°‘æˆ–å†™å¤šä¸€ä¸ª .., å°±ä¼šæŠ¥é”™\nOh, it makes me uncomfortable ğŸ˜‘\nå› æ­¤ï¼Œéœ€æ±‚æ˜¯å¯ä»¥ç”¨ç®€å•çš„è·¯å¾„å¼•ç”¨é€šç”¨å®ç”¨æ¨¡å—\nSolution One ä½¿ç”¨ module-alias, ç®€æ´ä¸”æ˜“ç”¨\nä¸ªäººè®¤ä¸ºåªæœ‰ä¸€ä¸ªç¼ºç‚¹ - å®ƒæ›´æ”¹ Module._resolveFilename æ–¹æ³•\nSolution Two npm å’Œ yarn ç°å·²æ”¯æŒå®‰è£…æœ¬åœ°æ¨¡å—\né¦–å…ˆéœ€è¦ä¸ºæœ¬åœ°æ¨¡å—æ·»åŠ  package.json æ–‡ä»¶\n å¯¹äº package.json, å…¶ name, version æ˜¯å¿…éœ€çš„\n æœ¬åœ°æ¨¡å—çš„åå­—ä¸º package.json çš„ name å­—æ®µï¼Œè€Œä¸æ˜¯æœ¬åœ°æ¨¡å—æ‰€å¤„ç›®å½•å\nå‡è®¾æœ¬åœ°æ¨¡å—ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„æ˜¯ .\/local-package-dir, å…¶åœ¨ package.json æ–‡ä»¶ä¸­çš„ name ä¸º local-package\nåˆ™å®‰è£…æœ¬åœ°æ¨¡å—çš„æ–¹æ³•å¦‚ä¸‹ï¼š\n# åœ¨ node_modules ä¸­åˆ›å»ºè½¯é“¾ local-package æŒ‡å‘ ..\/local-package-dir npm install .\/local-package-dir # æ‹·è´ .",
      "inLanguage" : "en-US",
      "author" : "CsYakamoz",
      "creator" : "CsYakamoz",
      "publisher": "CsYakamoz",
      "accountablePerson" : "CsYakamoz",
      "copyrightHolder" : "CsYakamoz",
      "copyrightYear" : "2020",
      "datePublished": "2020-09-09 11:00:07 \u002b0800 CST",
      "dateModified" : "2020-09-09 11:00:07 \u002b0800 CST",
      "url" : "https:\/\/csyakamoz.github.io\/post\/nodejs-crate-local-package\/",
      "keywords" : [ "javascript", ]
  }
</script>
<title>Node.js åˆ›å»ºæœ¬åœ°æ¨¡å— - CsYakamoz`s Blog</title>
  <meta property="og:title" content="Node.js åˆ›å»ºæœ¬åœ°æ¨¡å— - CsYakamoz`s Blog" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="é—®é¢˜æ¥æº åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¸ªäººä¹ æƒ¯ä¼šæŠŠé€šç”¨å®ç”¨æ¨¡å—æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹
å› ä¸ºæ˜¯é€šç”¨å®ç”¨æ¨¡å—ï¼Œè‹¥é¡¹ç›®å±‚çº§è¾ƒå¤šï¼Œé‚£ä¹ˆå±‚çº§è¾ƒæ·±çš„æ–‡ä»¶å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œä¼šå‡ºç°è¿™æ ·çš„ä»£ç ï¼š
const Utils = require(&#34;../../../../../../../utils&#34;); è¿™ä¹ˆå¤šçš„ .., å¦‚æœå†™å°‘æˆ–å†™å¤šä¸€ä¸ª .., å°±ä¼šæŠ¥é”™
Oh, it makes me uncomfortable ğŸ˜‘
å› æ­¤ï¼Œéœ€æ±‚æ˜¯å¯ä»¥ç”¨ç®€å•çš„è·¯å¾„å¼•ç”¨é€šç”¨å®ç”¨æ¨¡å—
Solution One ä½¿ç”¨ module-alias, ç®€æ´ä¸”æ˜“ç”¨
ä¸ªäººè®¤ä¸ºåªæœ‰ä¸€ä¸ªç¼ºç‚¹ - å®ƒæ›´æ”¹ Module._resolveFilename æ–¹æ³•
Solution Two npm å’Œ yarn ç°å·²æ”¯æŒå®‰è£…æœ¬åœ°æ¨¡å—
é¦–å…ˆéœ€è¦ä¸ºæœ¬åœ°æ¨¡å—æ·»åŠ  package.json æ–‡ä»¶
 å¯¹äº package.json, å…¶ name, version æ˜¯å¿…éœ€çš„
 æœ¬åœ°æ¨¡å—çš„åå­—ä¸º package.json çš„ name å­—æ®µï¼Œè€Œä¸æ˜¯æœ¬åœ°æ¨¡å—æ‰€å¤„ç›®å½•å
å‡è®¾æœ¬åœ°æ¨¡å—ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„æ˜¯ ./local-package-dir, å…¶åœ¨ package.json æ–‡ä»¶ä¸­çš„ name ä¸º local-package
åˆ™å®‰è£…æœ¬åœ°æ¨¡å—çš„æ–¹æ³•å¦‚ä¸‹ï¼š
# åœ¨ node_modules ä¸­åˆ›å»ºè½¯é“¾ local-package æŒ‡å‘ ../local-package-dir npm install ./local-package-dir # æ‹·è´ ." />
  <meta name="description" content="é—®é¢˜æ¥æº åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¸ªäººä¹ æƒ¯ä¼šæŠŠé€šç”¨å®ç”¨æ¨¡å—æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹
å› ä¸ºæ˜¯é€šç”¨å®ç”¨æ¨¡å—ï¼Œè‹¥é¡¹ç›®å±‚çº§è¾ƒå¤šï¼Œé‚£ä¹ˆå±‚çº§è¾ƒæ·±çš„æ–‡ä»¶å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œä¼šå‡ºç°è¿™æ ·çš„ä»£ç ï¼š
const Utils = require(&#34;../../../../../../../utils&#34;); è¿™ä¹ˆå¤šçš„ .., å¦‚æœå†™å°‘æˆ–å†™å¤šä¸€ä¸ª .., å°±ä¼šæŠ¥é”™
Oh, it makes me uncomfortable ğŸ˜‘
å› æ­¤ï¼Œéœ€æ±‚æ˜¯å¯ä»¥ç”¨ç®€å•çš„è·¯å¾„å¼•ç”¨é€šç”¨å®ç”¨æ¨¡å—
Solution One ä½¿ç”¨ module-alias, ç®€æ´ä¸”æ˜“ç”¨
ä¸ªäººè®¤ä¸ºåªæœ‰ä¸€ä¸ªç¼ºç‚¹ - å®ƒæ›´æ”¹ Module._resolveFilename æ–¹æ³•
Solution Two npm å’Œ yarn ç°å·²æ”¯æŒå®‰è£…æœ¬åœ°æ¨¡å—
é¦–å…ˆéœ€è¦ä¸ºæœ¬åœ°æ¨¡å—æ·»åŠ  package.json æ–‡ä»¶
 å¯¹äº package.json, å…¶ name, version æ˜¯å¿…éœ€çš„
 æœ¬åœ°æ¨¡å—çš„åå­—ä¸º package.json çš„ name å­—æ®µï¼Œè€Œä¸æ˜¯æœ¬åœ°æ¨¡å—æ‰€å¤„ç›®å½•å
å‡è®¾æœ¬åœ°æ¨¡å—ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„æ˜¯ ./local-package-dir, å…¶åœ¨ package.json æ–‡ä»¶ä¸­çš„ name ä¸º local-package
åˆ™å®‰è£…æœ¬åœ°æ¨¡å—çš„æ–¹æ³•å¦‚ä¸‹ï¼š
# åœ¨ node_modules ä¸­åˆ›å»ºè½¯é“¾ local-package æŒ‡å‘ ../local-package-dir npm install ./local-package-dir # æ‹·è´ ." />
  <meta property="og:locale" content="zh-cn" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet" href="/css/github-markdown.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">

  

  <link href="/index.xml" rel="alternate" type="application/rss+xml"
    title="CsYakamoz`s Blog">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel="stylesheet">
  
  

  
  
</head>


<body>
  <article class="post Chinese" id="article">
    <div class="row">
      <div class="col-xs-12">
        <div class="site-header">
          
<header>
  <div class="signatures site-title">
    <a href="/">CsYakamoz</a>
  </div>
</header>
<div class="row end-xs">
  
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">Node.js åˆ›å»ºæœ¬åœ°æ¨¡å—</h1>
          
          <div class="row post-desc">
            <div class="col-xs-6">
              
              <time class="post-date" datetime="2020-09-09 11:00:07 CST">
                09 Sep 2020
              </time>
              
            </div>
            <div class="col-xs-6">
              
              <div class="post-author">
                <a target="_blank" href="">@CsYakamoz</a>
              </div>
              
            </div>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          
          <h2 id="é—®é¢˜æ¥æº">é—®é¢˜æ¥æº</h2>
<p>åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œä¸ªäººä¹ æƒ¯ä¼šæŠŠé€šç”¨å®ç”¨æ¨¡å—æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹</p>
<p>å› ä¸ºæ˜¯é€šç”¨å®ç”¨æ¨¡å—ï¼Œè‹¥é¡¹ç›®å±‚çº§è¾ƒå¤šï¼Œé‚£ä¹ˆå±‚çº§è¾ƒæ·±çš„æ–‡ä»¶å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œä¼šå‡ºç°è¿™æ ·çš„ä»£ç ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Utils</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;../../../../../../../utils&#34;</span>);
</code></pre></div><p>è¿™ä¹ˆå¤šçš„ <code>..</code>, å¦‚æœå†™å°‘æˆ–å†™å¤šä¸€ä¸ª <code>..</code>, å°±ä¼šæŠ¥é”™</p>
<p>Oh, it makes me uncomfortable ğŸ˜‘</p>
<p>å› æ­¤ï¼Œéœ€æ±‚æ˜¯å¯ä»¥ç”¨ç®€å•çš„è·¯å¾„å¼•ç”¨é€šç”¨å®ç”¨æ¨¡å—</p>
<h2 id="solution-one">Solution One</h2>
<p>ä½¿ç”¨ <a href="https://www.npmjs.com/package/module-alias">module-alias</a>, ç®€æ´ä¸”æ˜“ç”¨</p>
<p>ä¸ªäººè®¤ä¸ºåªæœ‰ä¸€ä¸ªç¼ºç‚¹ - å®ƒæ›´æ”¹ <code>Module._resolveFilename</code> æ–¹æ³•</p>
<h2 id="solution-two">Solution Two</h2>
<p><code>npm</code> å’Œ <code>yarn</code> ç°å·²æ”¯æŒå®‰è£…æœ¬åœ°æ¨¡å—</p>
<p>é¦–å…ˆéœ€è¦ä¸ºæœ¬åœ°æ¨¡å—æ·»åŠ  <code>package.json</code> æ–‡ä»¶</p>
<blockquote>
<p>å¯¹äº package.json, å…¶ name, version æ˜¯å¿…éœ€çš„</p>
</blockquote>
<p>æœ¬åœ°æ¨¡å—çš„åå­—ä¸º <code>package.json</code> çš„ <code>name</code> å­—æ®µï¼Œè€Œä¸æ˜¯æœ¬åœ°æ¨¡å—æ‰€å¤„ç›®å½•å</p>
<p>å‡è®¾æœ¬åœ°æ¨¡å—ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„æ˜¯ <code>./local-package-dir</code>, å…¶åœ¨ package.json æ–‡ä»¶ä¸­çš„ <code>name</code> ä¸º <code>local-package</code></p>
<p>åˆ™å®‰è£…æœ¬åœ°æ¨¡å—çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">
<span style="color:#75715e"># åœ¨ node_modules ä¸­åˆ›å»ºè½¯é“¾ local-package æŒ‡å‘ ../local-package-dir</span>
npm install ./local-package-dir

<span style="color:#75715e"># æ‹·è´ ./local-package-dir çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ”¾åˆ° node_modules/local-package</span>
yarn add ./local-package-dir

<span style="color:#75715e"># åœ¨ node_modules ä¸­åˆ›å»ºè½¯é“¾ local-package æŒ‡å‘ ../local-package-dir</span>
yarn add link:./local-package-dir

</code></pre></div><p>ç°åœ¨å¼•ç”¨æœ¬åœ°æ¨¡å—æ—¶ï¼Œå¯è¿™ä¹ˆå†™ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">package</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;local-package&#34;</span>);
</code></pre></div><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://github.com/goldbergyoni/nodebestpractices/blob/master/sections/projectstructre/wraputilities.md">Wrap common utilities as npm packages</a></p>
<p><a href="https://juejin.im/post/5ab3f77df265da2392364341">2018 å¹´äº†ï¼Œä½ è¿˜æ˜¯åªä¼š npm install å—ï¼Ÿ</a></p>
<p><a href="https://docs.npmjs.com/cli/install.html">npm install</a></p>
<p><a href="https://classic.yarnpkg.com/en/docs/cli/add/">yarn add</a></p>

        </div>

        <div class="row middle-xs">
          <div class="col-xs-12">
            
          </div>
        </div>
        
          <div class="row">
            <div class="col-xs-12">
              
            </div>
          </div>

          

<div class="related-content">
  <h3>Related Posts</h3>
  <ul>
    
    <li><a href="/post/javascript-function-parameter-type/">Javascript å‡½æ•°ä¼ å‚ç±»å‹</a></li>
    
    <li><a href="/post/javascript-iterate-object-property-order/">JavaScript éå†å¯¹è±¡å±æ€§é¡ºåº</a></li>
    
    <li><a href="/post/coding-style/">ç¼–ç é£æ ¼</a></li>
    
  </ul>
</div>



          
          
          <div style="height: 50px;"></div>
          
          <div class="post-comments">
            <div id="disqus_thread"></div>
<script>
  window.addEventListener("load", () => {
    (function() {
      
      var d = document,
        s = d.createElement("script");
      s.src = "https://csyakamoz.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  });
</script>
<noscript
  >Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript"
    >comments powered by Disqus.</a
  ></noscript
>

          </div>
          
        

        <div class="site-footer">
  
  <div class="site-footer-item">
    <a href="https://github.com/CsYakamoz" target="_blank">Github</a>
  </div>
  
  <div class="site-footer-item">
    <a href="https://leetcode.com/CsYakamoz/" target="_blank">LeetCode</a>
  </div>
  
  
</div>

      </div>
    </div>
  </article>

  <script src="/js/highlight.pack.js"></script>


<script>
  hljs.initHighlightingOnLoad();
  
  
  
    
    
  
</script>

  

</body>

</html>